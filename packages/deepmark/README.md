# deepmark

Translate markdown files correctly with `remark` and Deepl.

## Getting Started

1. Install `deepmark`:

```bash
# NPM
npm install -D deepmark

# PNPM
pnpm add -D deepmark

# Yarn
yarn add -D deepmark
```

2. Create a `deepmark` directory at your project root. Then, create a `deepmark.config.mjs` inside it:

```js
// ./deepmark/deepamrk.config.mjs

/** @type { import('deepmark').UserConfig } */
export default {
	source_language: 'en',
	output_languages: ['fr', 'ja', 'zh'],
	directories: {
		sources: ['docs', 'blog'],
		outputs: ['i18n/%language%/docs', 'i18n/%language%/blog']
	},
	ignore_nodes: [],
	ignore_components: [],
	components_attributes: {},
	frontmatter: []
};
```

3. Set `DEEPL_AUTH_KEY` environment variable containing `deepl` developer auth key:

```bash
# If you're on Linux
export DEEPL_AUTH_KEY=your_auth_key
```

You can also use something like `dotenv` package. For CI and remote environment such as Github Actions and Gitpod, look into their setting page to set environment variables.

4. Set NPM scripts in your `package.json`:

```json
{
	"scripts": {
		"translate": "deepmark translate"
	}
}
```

5. Format your markdowns first with Prettier and `printWidth` set to `Infinity` to avoid parsing error due to bad formatting. Then, translate!

```bash
# NPM
npm run translate

# PNPM
pnpm run translate

# Yarn
yarn translate
```

Notes:

> `deepmark` also supports translating JSON files. But, currently it only supports JSON generated by Docusaurus. More generic handling will be implemented in future version.

## Limitations

1. It is not possible to add `remark` plugins to the workflow.
2. `gfm`, `admonitions`, and `blockquote` syntax such as table and strikethrough is translated as is in markdown syntax.
3. Deepl currently does not understand markdown syntax. Therefore, the result might not be a valid markdown. Avoid using this library if you use those syntaxes.
4. Only support `.md` and `.mdx`. Other extended verisons of markdown such as Svelte extended `mdsvex` are not supported.

Number 1 to 3 are planned to be solved in future versions. Number 4 might never be solved.

## Contributions

Your contributions are very welcomed. But, the code base still need some polishing, especially in test, for your contribution experience to be not terrible. Therefore, the PR and Issue features will be disabled until then.

## Documentation

Work in progress..
